<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <link rel='icon' type='image/png' href="images/icon.png">
    <title>BookShop - Buy any book</title>
    <link rel="stylesheet" href="stylesheets/bootstrap.min.css">
    <link rel="stylesheet" href="stylesheets/animate.css">
    <script src="javascripts/jquery.min.js"></script>
    <script src="javascripts/bootstrap.min.js"></script>
    <style>
        #books{
            font-size: 32px;
            font-family: "Georgia, 'Ties New Roman', Times, serif"
            
        }
        option{
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
            font-size: 24px;
            text-align: center
        }
        .main-book{
            font-size:20px;
            margin-top: 30px;
            background-color: #FAFAFB;
            box-shadow: 5px 5px 5px grey;
            padding:20px;
            padding-left: 30px;
            padding-right: 30px;
            font-family: 'Times New Roman', Times, serif;
        }
  </style>
</head>

<body style='margin-bottom: 130px'>
<nav class='navbar navbar-inverse' style='border-radius:0;margin-bottom: 0'>
<div class='container-fluid'>
    <div class='navbar-header'>
        <a href="#" class='navbar-brand text-success'>BookShop</a>
        <button class='navbar-toggle' type="button" data-toggle='collapse' data-target='#navbar'>
					<span class='icon-bar'></span>
					<span class='icon-bar'></span>
					<span class='icon-bar'></span>
				</button>
    </div>
    <div class='collapse navbar-collapse' id='navbar'>
        <ul class='nav navbar-nav navbar-right'>
            <li><a href="index.html">Search Books</a></li>
            <li><a href="logout.html">Login</a></li>
        </ul>
    </div>
</div>
</nav>


<div class='container' style='margin-top:100px'>
<div class='col-sm-3'></div>
<div class='col-sm-6'>
    <div class='form-group'>
        <label for='username'>Username</label>
        <input type="text" id='username' name="username" class='form-control' required>
    </div>
    <div class='form-group'>
        <label for='password'>Password</label>
        <input type="password" id='password' name="password" class='form-control' required>
    </div>
    <br>
    <center>
        <div class='form-group' style='width:100px'>
<btn class='btn form-control btn-success' id='btnClick'>LOGIN</button>
    </div>
    </center>
    </form>
    </div>
    </div>


    <script>
        $('#btnClick').click(function () {
            var name = $('#name').val();
            var username = $('#username').val();
            var password = $('#password').val();
            $.ajax({
                url: 'https://bookshopapi123.herokuapp.com/login',
                type: 'POST',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: JSON.stringify({
                    username: username,
                    password: password
                }),
                success: function (response) {
                    if (response.status == 200) {
                        document.cookie="idOfUser="+response.data._id+";expires;path=/";
                        var val = readCookie("idOfUser");
                        console.log("logged in");       
                        window.location="https://bookshopapi123.herokuapp.com/index.html";

                    }
                    else {
                        alert(response.msg);
                    }

                }
            })
        });

        function createCookie(name, value, days) {
            if (days) {
                var date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                var expires = "; expires=" + date.toGMTString();
            }
            else var expires = "";
            document.cookie = name + "=" + value + expires + "; path=/";
        }

        function readCookie(name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        function eraseCookie(name) {
            createCookie(name, "", -1);
        }
    </script>



</body>

</html>